<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>비동기 통신 방식 (vanilla js 이용)</title>
    <script>
        // [로딩] 버튼을 클릭하면 서버에 있는 hello.txt 파일을
        // 비동기 통신방식으로 얻어와
        // div 영역에 그 내용을 출력하자.
        function loadTxt(){
            // alert("!");
            let xhttp = new XMLHttpRequest(); // XHR객체 (ajax 객체) 생성

            if (xhttp != null) {
                console.log(this);
                xhttp.onreadystatechange = function(){
                    console.log(this);
                    if (this.readyState == 4 && this.status == 200) {
                        // 통신이 성공(완료)되었다면
                        document.getElementById("output").innerHTML = this.responseText;
                    }
                };
            } else {
                alert("웹 브라우저가 비동기 통신을 지원하지 않습니다.");
            }

            xhttp.open("GET", "http://127.0.0.1/hello.txt"); // 요청
            xhttp.send(); // 요청 전송
            

        }

    </script>
</head>
<body>
    <input type="button" value="로딩" onclick="loadTxt()">
    <div id="output"></div>
</body>
</html>