<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>

        const STU_CNT = 5;
        let scores = new Array(STU_CNT);
        scores = [["250106", "홍길동", 77, 88, 90], ["250107", "홍길서", 77, 88, 80], ["250108", "홍길남", 77, 88, 70], ["250109", "홍길북", 77, 88, 100], ["250110", "홍길순", 77, 88, 90]];
        console.log(scores);

        for (let i = 0; i < STU_CNT; i++){
            //총점
            scores[i][5] = scores[i][2] + scores[i][3] + scores[i][4];
            //평균
            scores[i][6] = (scores[i][5] / 3).toFixed(2);
            //학점
            switch (Math.floor(scores[i][6] / 10)){
                case 10 :
                case 9 :
                    scores[i][7] = "A";
                    break;
                case 8 :
                    scores[i][7] = "B";
                    break;
                case 7 :
                    scores[i][7] = "C";
                    break;
                case 6 :
                    scores[i][7] = "D";
                    break;
                default :
                    scores[i][7] = "F";
                    break;
            }
        }

        // 평균 내림차순 정렬

        function order() {
            let order =  "";
            let radios = document.getElementsByName("order");
            // console.log(radios);
            for (let radio of radios) {
                // console.log(radio.checked); // 체크가 된 경우 true 반환
                if (radio.checked == true){
                    // console.log(radio.value);
                    order = radio.value;
                }
            }
            console.log(order);

            if (order == "desc"){
                for (let i = 0; i < scores.length - 1; i++){
                    for (let j = i + 1; j < scores.length; j++){
                        if (scores[i][6] < scores[j][6]){
                            let tmp = scores[j];
                            scores[j] = scores[i];
                            scores[i] = tmp;
                        }
                        
                    }
                }

                for (let ind in scores){
                    scores[ind][8] = Number(ind) + 1;
                    if (ind > 0 && scores[ind][5] == scores[ind - 1][5]){
                            scores[ind][8] = scores[ind - 1][8];
                    }
                }
            }

            

            let rankoutput  = "<table class = 'table'>";
            
            rankoutput += "<tr><th>학번</th><th>이름</th><th>국어</th><th>영어</th><th>수학</th><th>총점</th><th>평균</th><th>학점</th><th>등수</th></tr>";
            for (let i = 0; i < scores.length; i++){
                rankoutput += "<tr>";
                    for (let j = 0; j < scores[i].length; j++){
                        rankoutput += `<td>${scores[i][j]}</td>`;
                    }
                rankoutput += "</tr>";
            }
            rankoutput += "</table>";

            document.getElementById("table").innerHTML = rankoutput;
        }


        console.log(scores);
        
        console.log(scores);

        // 평균 오름차순 정렬

        // for (let i = 0; i < scores.length - 1; i++){
        //     for (let j = i + 1; j < scores.length; j++){
        //         if (scores[i][6] > scores[j][6]){
        //             let tmp = scores[j];
        //             scores[j] = scores[i];
        //             scores[i] = tmp;
        //         }
                
        //     }
        // }
    </script>
</head>
<body>
    <div id="order">
        <input type = "radio" name = "order" id = "asc" value = "asc"> 오름차순 정렬
        <input type = "radio" name = "order" id = "desc" value = "desc"> 내림차순 정렬
        <button onclick="order()">정렬</button>
    </div>
    <div id="table">
        
    </div>
</body>
</html>