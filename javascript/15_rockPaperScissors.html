<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        // 컴퓨터와 유저의 가위바위보
        // 컴퓨터 : 랜덤하게 가위(1), 바위(2), 보(3)를 낸다.
        // 유저 : 가위(1), 바위(2), 보(3)를 select해서 [선택]버튼 누른다.
        // 유저의 승패 결과를 화면에 출력한다.
        let totalW = 0;
        let totalD = 0;
        let totalL = 0;
        let winRate = 0;

         function gameStart() {
            let cpus = Math.floor(Math.random() * 3 + 1);
            // 아래의 users의 값은 string으로 반환
            let users = (document.getElementById("userSelectVal").value);
            let result = "";
            let userImg = "";
            let cpuImg = "";
            console.log(cpus, users);

            switch (users) {
                case "1":
                    userImg = "images/scissors.png";
                    break;
                case "2":
                    userImg = "images/rock.png";
                    break;
                case "3":
                    userImg = "images/paper.png";
                    break;
            }
            switch (cpus) {
                case 1:
                    cpuImg = "images/scissors.png";
                    break;
                case 2:
                    cpuImg = "images/rock.png";
                    break;
                case 3:
                    cpuImg = "images/paper.png";
                    break;
            }

            document.getElementById("userImg").src = userImg;
            document.getElementById("cpuImg").src = cpuImg;

            // 승패를 판단
            // 비기는 경우
            // 이기는 경우
            // users == 1 cpus == 3
            // users == 2 cpus == 1
            // users == 3 cpus == 2
            // 지는 경우
            if (users == cpus) {
                result = "비겼다!!";
                totalD += 1;
            } else if ( users == 1 && cpus == 3 || users == 2 && cpus == 1 || users == 3 && cpus == 2) {
                result = "이겼다!!";
                totalW += 1;
            } else {
                result = "졌다!! ㅠㅠ";
                totalL += 1;
            }
            winRate = (totalW / (totalL + totalD + totalW)) * 100;
            document.getElementById("result").innerHTML = result;
            document.getElementById("total").innerHTML = `${totalW}승 ${totalD}무 ${totalL}패`;
            document.getElementById("winRate").innerHTML = `승률 : ${winRate.toFixed(2)} %`;
         }

         
    </script>
</head>
<body>
    <h1>가위, 바위, 보!</h1>
    <div class="userInput">
        <select id="userSelectVal">
            <option value="1">가위</option>
            <option value="2">바위</option>
            <option value="3">보</option>
        </select>
        <input type="button" value="선택" onclick="gameStart();">
    </div>
    <div id="tableArea">
        <table border="1">
            <tr>
                <td>컴퓨터</td>
                <td>유저</td>
            </tr>
            <tr>
                <td><img src="" id="cpuImg"></td>
                <td><img src="" id="userImg"></td>
            </tr>
        </table>
    </div>
    <div id="result"></div>
    <div id="total">N승 M무 L패</div>
    <div id="winRate">승률 :</div>
</body>
</html>