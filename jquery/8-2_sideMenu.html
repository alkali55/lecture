<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <title>Document</title>
    <script>
      $(document).ready(function () {
        let burgerPrice = parseInt($("#burgerPrice").html());
        console.log(burgerPrice);

        $(".side-menu").change(function () {
          // 각 사이드 메뉴체크박스를 체크해서 모두 체크하게 되면
          // 모두선택 체크박스도 checked 상태로 변경
          calTotal();
          console.log($(".side-menu:checked").length);
          console.log($(".side-menu").length);
          if ($(".side-menu").length == $(".side-menu:checked").length) {
            // 모두선택됨
            $("#selectAll").prop("checked", true);
          } else {
            $("#selectAll").prop("checked", false);
          }
        });

        // 모두선택을 체크했을 때
        $("#selectAll").change(function () {
          console.log($(this)); // input#selectAll
          if ($(this).prop("checked")) {
            //모두선택이 체크가 되어있으면 true
            $(".side-menu").prop("checked", true);
          } else {
            $(".side-menu").prop("checked", false);
          }
          calTotal();
        });

        function calTotal() {
          // 총가격 계산
          let total = burgerPrice;
          $(".side-menu").each(function (i, item) {
            if ($(item).prop("checked")) {
              // 해당 메뉴가 체크가 되어 있으면
              let price = parseInt($(item).val());
              total += price;
            }
          });
          $("#totalPrice").text("총가격: " + total + "원");
        }
      });
    </script>
  </head>
  <body>
    <h1>소고기 버거 (<span id="burgerPrice">10000</span>원)</h1>
    <div><img src="images/hamburger.jpg" alt="" width="200px" /></div>
    <h2>사이드 메뉴 선택</h2>
    <input type="checkbox" id="selectAll" />
    <label for="selectAll">모두선택</label><br />

    <input type="checkbox" id="beef" class="side-menu" value="2500" />
    <label for="beef">쇠고기 패티(+2500원)</label><br />

    <input type="checkbox" id="shrimp" class="side-menu" value="2500" />
    <label for="shrimp">통새우(+2500원)</label><br />

    <input type="checkbox" id="mushroom" class="side-menu" value="1500" />
    <label for="mushroom">버섯(+1500원)</label><br />

    <input type="checkbox" id="bacon" class="side-menu" value="1200" />
    <label for="bacon">베이컨(+1200원)</label><br />

    <p id="totalPrice">총가격: 10000원</p>
  </body>
</html>
